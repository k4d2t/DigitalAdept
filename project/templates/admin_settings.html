{% extends "admin_base.html" %}

{% block admin_title %}
    Paramètres du site
{% endblock %}

{% block admin_content %}
<div class="settings-page">
    <h1>Paramètres du Site</h1>
    <nav class="admin-nav">
        <a href="{{ url_for('admin_dashboard') }}">Retour au tableau de bord</a>
    </nav>

    <div class="tiles" style="margin-top: 2em;">
        <a href="{{ url_for('admin_settings_users') }}" class="tile-link">
            <section>
                <h2>Utilisateurs</h2>
                <p>Gérer les administrateurs et leurs rôles.</p>
            </section>
        </a>

        <!-- NOUVELLE TUILE À AJOUTER -->
        <a href="{{ url_for('admin_relaunch_settings') }}" class="tile-link">
            <section>
                <h2>Stratégie de Relance</h2>
                <p>Configurer les relances de paniers abandonnés.</p>
            </section>
        </a>
       
        <br> 
        <!-- Section "Zone de Danger" existante -->
        <div class="tile-link danger-zone">
            <section>
                <h2 style="color: var(--red);">Zone de Danger</h2>
                <p style="color: var(--text); margin-bottom: 1.5em;">
                    L'action ci-dessous est irréversible et effacera toutes les données.
                </p>
                <form id="resetDbForm" action="{{ url_for('reset_database_secure') }}" method="POST" style="display: inline-block;">
                    <button type="button" id="resetDbButton" class="btn" style="background-color: var(--red-dark); color: white;">
                        Réinitialiser la Base de Données
                    </button>
                </form>
            </section>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const resetButton = document.getElementById('resetDbButton');
    const resetForm = document.getElementById('resetDbForm');

    if (resetButton && resetForm) {
        resetButton.addEventListener('click', () => {
            ConfirmModal(
                'Êtes-vous absolument certain de vouloir réinitialiser la base de données ? Toutes les données (produits, utilisateurs, etc.) seront définitivement perdues.',
                'Oui, réinitialiser',
                'Non, annuler',
                () => {
                    resetForm.submit();
                },
                () => {
                    showNotification('Opération annulée.', 'info');
                }
            );
        });
    }
});
</script>
{% endblock %}
