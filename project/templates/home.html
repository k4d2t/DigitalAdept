{% extends "base.html" %}
{% block content %}
<section class="home-hero">
  <div class="home-hero-content">
    <h1>Bienvenue sur <span class="accent">Digital Adept</span></h1>
    <p>
      D√©couvrez nos produits phares, profitez de nos meilleures offres et suivez les nouveaut√©s toute la semaine.<br>
      <strong>Des prix doux, des annonces fra√Æches, et un service au top¬†!</strong>
    </p>
    <a class="cta" href="/produits" data-page="produits">Explorez nos produits</a>
  </div>
</section>

<section class="featured-products">
  <h2 class="featured-title">‚≠ê √Ä la une cette semaine</h2>
  <div class="featured-list">
  {% if produits_vedette and produits_vedette|length > 0 %}
    {% for produit in produits_vedette %}
    <a class="product-card" href="/produit/{{ produit.slug }}">

      <!-- BADGES CORRIG√âS -->
      <div class="product-badges-container">
          {# Badge PROMO automatique si ancien prix existe #}
          {% if produit.old_price and produit.old_price > produit.price %}
              {% set discount = ((produit.old_price - produit.price) / produit.old_price * 100) | round | int %}
              <span class="product-badge badge-promo">{{ discount }}% OFF</span>
          {% endif %}

          {# Boucle sur les badges manuels du produit #}
          {% for badge in produit.badges %}
              <span class="product-badge badge-{{ badge.type|lower }}">{{ badge.text }}</span>
          {% endfor %}
      </div>

      {% set img = produit.images[0] if produit.images else (produit.image or 'default.jpg') %}
      {% if img is string %}   {% set url = img %} {% else %}   {% set url = img.url %} {% endif %} {% set base = url.split('/')[-1].rsplit('.', 1)[0] %}
      <picture>
        <source
          srcset="
            https://cdn.jsdelivr.net/gh/k4d2t/DigitalAdept@main/project/static/img/{{ base }}-400.webp 400w,
            https://cdn.jsdelivr.net/gh/k4d2t/DigitalAdept@main/project/static/img/{{ base }}-800.webp 800w,
            https://cdn.jsdelivr.net/gh/k4d2t/DigitalAdept@main/project/static/img/{{ base }}-1200.webp 1200w
          "
          type="image/webp"
          sizes="(max-width:600px) 400px, (max-width:1100px) 800px, 1200px"
        >
        <source
          srcset="
            https://cdn.jsdelivr.net/gh/k4d2t/DigitalAdept@main/project/static/img/{{ base }}-400.jpg 400w,
            https://cdn.jsdelivr.net/gh/k4d2t/DigitalAdept@main/project/static/img/{{ base }}-800.jpg 800w,
            https://cdn.jsdelivr.net/gh/k4d2t/DigitalAdept@main/project/static/img/{{ base }}-1200.jpg 1200w
          "
          type="image/jpeg"
          sizes="(max-width:600px) 400px, (max-width:1100px) 800px, 1200px"
        >
        <img src="https://cdn.jsdelivr.net/gh/k4d2t/DigitalAdept@main/project/static/img/{{ base }}-800.jpg"
            alt="{{ produit.name }}"
            fetchpriority="high"
            width="400" height="266">
      </picture>
      <div class="product-info">
        <h3>{{ produit.name }}</h3>
        <p class="product-desc">
          {{ produit.short_description or produit.description|striptags|truncate(90) }}
        </p>
          <span data-price="{{ produit.price }}" data-currency="{{ produit.currency }}">
            {{ produit.price }} {{ produit.currency }}
          </span>
          {% if produit.old_price %}
            <span class="product-old-price" data-price="{{ produit.price }}" data-currency="{{ produit.currency }}">{{ produit.old_price }} {{ produit.currency }}</span>
          {% endif %}
      </div>
      </div>
    </a>
    {% endfor %}
  {% else %}
    <p style="text-align:center;opacity:.8;">Aucun produit √† la une pour l'instant.</p>
  {% endif %}
</div>
</section>
<script>
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.faq-question').forEach(btn => {
    btn.addEventListener('click', function () {
      // Toggle only this accordion
      const expanded = this.getAttribute('aria-expanded') === 'true';
      // Ferme les autres accordions
      document.querySelectorAll('.faq-question').forEach(other => {
        if (other !== this) other.setAttribute('aria-expanded', 'false');
      });
      this.setAttribute('aria-expanded', expanded ? 'false' : 'true');
    });
    btn.addEventListener('focus', function(e){ this.style.boxShadow = "none"; });
    btn.addEventListener('blur', function(e){ this.style.boxShadow = "none"; });
  });
});
</script>

<!-- ===== SECTION FAQ ===== -->
<section class="faq-section neon-section">
  <h2 class="neon-title">‚ùì FAQ ‚Äì Digital Adept</h2>
  <div class="faq-list">
    <div class="faq-item">
      <button class="faq-question" aria-expanded="false">
        Digital Adept, c‚Äôest quoi exactement&nbsp;?
      </button>
      <div class="faq-answer">
        Plateforme <b>africaine</b> de produits digitaux‚ÄØ: on vous propose le meilleur du num√©rique, accessible, simple et s√©curis√©, pour tous les usages.
      </div>
    </div>
    <div class="faq-item">
      <button class="faq-question" aria-expanded="false">
        Qui peut acheter sur Digital Adept&nbsp;?
      </button>
      <div class="faq-answer">
        Tout le monde‚ÄØ! Que vous soyez en Afrique ou ailleurs, Digital Adept est ouvert √† tous ceux qui cherchent des solutions num√©riques innovantes √† prix doux.
      </div>
    </div>
    <div class="faq-item">
      <button class="faq-question" aria-expanded="false">
        Pourquoi faire confiance √† Digital Adept&nbsp;?
      </button>
      <div class="faq-answer">
        <ul>
          <li>Cr√©√© en Afrique, pour les r√©alit√©s africaines.</li>
          <li>Des prix <b>ü•∂</b> et des promos r√©guli√®res.</li>
          <li>Des produits test√©s, valid√©s et recommand√©s par l‚Äô√©quipe.</li>
          <li>Plateforme rapide, moderne, et 100‚ÄØ% s√©curis√©e (https).</li>
        </ul>
      </div>
    </div>
    <div class="faq-item">
      <button class="faq-question" aria-expanded="false">
        Comment sont s√©curis√©s mes paiements&nbsp;?
      </button>
      <div class="faq-answer">
        <b>Vos paiements passent par FusionPay</b>‚ÄØ: solution de paiement chiffr√©e, reconnue pour la s√©curit√© et la fiabilit√© en Afrique.<br>
        Digital Adept ne stocke jamais vos infos bancaires.
      </div>
    </div>
    <div class="faq-item">
      <button class="faq-question" aria-expanded="false">
        Et mes donn√©es personnelles alors&nbsp;?
      </button>
      <div class="faq-answer">
        Vos donn√©es restent confidentielles‚ÄØ: elles ne sont jamais revendues ni partag√©es. La confiance, c‚Äôest la base chez Digital Adept.
      </div>
    </div>
    <div class="faq-item">
      <button class="faq-question" aria-expanded="false">
        Quels types de produits trouve-t-on ici&nbsp;?
      </button>
      <div class="faq-answer">
        Logiciels, ebooks, outils pour entreprises, ressources pour √©tudiants, services exclusifs, et plein d‚Äôautres surprises √† venir‚ÄØ!
      </div>
    </div>
    <div class="faq-item">
      <button class="faq-question" aria-expanded="false">
        Comment contacter l‚Äô√©quipe ou obtenir un conseil personnalis√©&nbsp;?
      </button>
      <div class="faq-answer">
        √âcrivez-nous via le <a href="/contact" class="faq-link">formulaire de contact</a>‚ÄØon r√©pond vite et avec le sourire‚ÄØ!
      </div>
    </div>
  </div>
</section>

<!-- ===== SECTION VIDEO ===== -->
<section class="video-promo-section">
  <h2>üé¨ D√©couvrez Digital Adept en vid√©o</h2>
  <div class="video-promo-flex">
    <div class="video-promo-player">
      <iframe src="https://www.youtube.com/embed/Xr9pQ1pIbi8" title="Pr√©sentation Digital Adept" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>
    </div>
    <div class="video-promo-text">
      <p>En 1 minute, comprenez comment Digital Adept r√©volutionne l‚Äôacc√®s aux solutions num√©riques. Simplicit√©, rapidit√©, s√©curit√© : tout est pens√© pour vous offrir la meilleure exp√©rience d‚Äôachat en ligne.</p>
    </div>
  </div>
</section>

<!-- ===== SECTION SATISFACTION / CONTACT ===== -->
<section class="satisfaction-section neon-section">
  <h2 class="neon-title">Notre site vous a plu&nbsp;?</h2>
  <p class="satisfaction-text">
    Gr√¢ce √† l‚Äôintelligence artificielle, Notre boutique a √©t√© construite en un temps record, tout en garantissant une exp√©rience moderne, intuitive et adapt√©e au contexte de l'√©cosyst√®me dans lequel il et publi√©.
    Vous voulez en un temps record aussi acc√©l√©rer votre pr√©sence digitale gr√¢ce √† un site cr√©e par l'IA sans avoir besoin d'√©crire une seule ligne de code‚ÄØ? <a href="/contact" class="faq-link">√âcrivez nous</a>, on s‚Äôoccupe du reste‚ÄØ!
  </p>
  <a class="cta cta-compact" href="/contact">Contactez-nous</a>
</section>
{% endblock %}
